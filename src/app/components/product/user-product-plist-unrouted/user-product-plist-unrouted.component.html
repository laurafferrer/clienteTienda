<div class="container flex justify-end mr-1">
  <div class="columns">
    <div class="column">
      <div class="field has-addons">
        <div class="relative flex items-center">
          <input type="text" [(ngModel)]="oValue" (ngModelChange)="onInputChange($event)"
            class="w-96 h-10 pl-10 border rounded-full mb-5 focus:outline-none focus:border-cyan-900 text-cyan-900" />
          <i class="fas fa-search absolute left-3 mb-5 text-cyan-900 cursor-pointer"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="columns">
<!-- Columna de Categorías -->
<div class="column is-2">
  <h1 class="title">Categorías</h1>

  <!-- Utilizando botones en lugar de una lista -->
  <div class="buttons">
    <button *ngFor="let category of oCategories" class="button categoria-item" (click)="findByCategory(category.id)"
      [class.active]="category.id === oIdCategoryFind && oFindByCategory">
      {{ category.name }}
    </button>
  </div>

  <!-- Botón "Quitar filtro" con estilo de Bulma -->
  <button *ngIf="oFindByCategory" type="button" (click)="removeFilter()" class="button">Quitar filtro</button>
</div>

  <!-- Columna de Productos -->
  <div class="column is-10">
    <div class="columns is-multiline align-right"> <!-- Add custom-align-right class -->
      <ng-container *ngFor="let product of oProducts">
        <div class="column is-3">
          <div class="card">
            <div class="card-image">
              <figure class="image is-4by3">
                <img [src]="product.image" alt="Imagen del producto" (click)="doView(product)">
              </figure>
            </div>
            <div class="card-content">
              <p class="font-semibold text-2xl">{{ product.name }}</p>
              <p class="font-semibold text-xl mt-2">Precio: {{ product.price }}€</p>
              <p class="text-xl font-normal" *ngIf="product.stock === 0">Sin existencias</p>
            </div>

            <footer class="card-footer" *ngIf="oUsername && product.stock != 0">
              <button class="card-footer-item button" (click)="makeProductPurhase(product)" [disabled]="product.stock === 0">
                Comprar<i class="fas fa-shopping-basket ml-2"></i>
              </button>
              <button class="card-footer-item button" (click)="addToCart(product)" [disabled]="product.stock === 0">
                Añadir al carrito <i class="fas fa-cart-plus ml-1"></i>
              </button>
            </footer>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="flex-auto mx-auto">
      <p-paginator class="flex items-center justify-center rounded" (onPageChange)="onPageChange($event)"
        [first]="oPaginatorState.first!" [rows]="oPaginatorState.rows!" [totalRecords]="oPage?.totalElements || 0">
      </p-paginator>
    </div>
  </div>
</div>

<p-confirmPopup></p-confirmPopup>